--// Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local playerGui = player:WaitForChild("PlayerGui")

--// ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SafeLoadingBar"
screenGui.IgnoreGuiInset = true
screenGui.ResetOnSpawn = false
screenGui.Parent = playerGui

--// Container Frame
local container = Instance.new("Frame")
container.Size = UDim2.new(0, 420, 0, 150)
container.Position = UDim2.new(0.5, 0, 0.5, 0)
container.AnchorPoint = Vector2.new(0.5, 0.5)
container.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
container.BackgroundTransparency = 0.1
container.Parent = screenGui

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 14)
corner.Parent = container

--// Violet Stroke
local stroke = Instance.new("UIStroke")
stroke.Parent = container
stroke.ApplyStrokeMode = Enum.ApplyStrokeMode.Border
stroke.LineJoinMode = Enum.LineJoinMode.Round
stroke.Thickness = 4
stroke.Color = Color3.fromRGB(148, 0, 211)
stroke.Transparency = 0.1

local gradient = Instance.new("UIGradient")
gradient.Parent = stroke
gradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(148, 0, 211)),
	ColorSequenceKeypoint.new(0.5, Color3.fromRGB(200, 100, 255)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(148, 0, 211))
}
gradient.Rotation = 360

--==============================
-- AVATAR + USER (ITAAS LANG)
--==============================

-- Avatar
local avatar = Instance.new("ImageLabel")
avatar.Size = UDim2.new(0, 90, 0, 90)
avatar.Position = UDim2.new(0, 20, 0.36, 0) -- inangat
avatar.AnchorPoint = Vector2.new(0, 0.5)
avatar.BackgroundTransparency = 1
avatar.ScaleType = Enum.ScaleType.Crop
avatar.Parent = container

local avatarCorner = Instance.new("UICorner")
avatarCorner.CornerRadius = UDim.new(1, 0)
avatarCorner.Parent = avatar

-- Avatar border (bilog)
local avatarStroke = Instance.new("UIStroke")
avatarStroke.Parent = avatar
avatarStroke.Thickness = 3
avatarStroke.Color = Color3.fromRGB(180, 120, 255)
avatarStroke.Transparency = 0.05

-- Kunin avatar ng gumagamit
local thumbType = Enum.ThumbnailType.HeadShot
local thumbSize = Enum.ThumbnailSize.Size180x180
local content = Players:GetUserThumbnailAsync(player.UserId, thumbType, thumbSize)
avatar.Image = content

-- Username (itaas din)
local username = Instance.new("TextLabel")
username.Text = "User: " .. player.Name
username.Size = UDim2.new(0, 130, 0, 18)
username.Position = UDim2.new(0, 10, 0.72, 0) -- inangat
username.BackgroundTransparency = 1
username.TextSize = 14
username.TextColor3 = Color3.fromRGB(255,255,255)
username.Font = Enum.Font.GothamSemibold
username.TextWrapped = true
username.Parent = container

--==============================
-- TEXT STYLE FUNCTION
--==============================
local function styleText(label, font, textSize)
	label.Font = font
	label.TextSize = textSize
	label.TextColor3 = Color3.fromRGB(255, 255, 255)
	label.TextStrokeTransparency = 0.8
	label.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
end

--// "Made by" Text
local madeBy = Instance.new("TextLabel")
madeBy.Text = "Made By : Dev"
madeBy.Size = UDim2.new(1, -170, 0, 25)
madeBy.Position = UDim2.new(0, 150, 0.15, 0)
madeBy.BackgroundTransparency = 1
madeBy.TextWrapped = true
madeBy.Parent = container
styleText(madeBy, Enum.Font.GothamBlack, 18)

local madeByShadow = madeBy:Clone()
madeByShadow.Position = madeBy.Position + UDim2.new(0, 2, 0, 2)
madeByShadow.ZIndex = madeBy.ZIndex - 1
madeByShadow.Parent = container

--// Discord Link
local discordLink = Instance.new("TextLabel")
discordLink.Text = "<u>https://discord.Devscripthub</u>"
discordLink.Size = UDim2.new(1, -170, 0, 20)
discordLink.Position = UDim2.new(0, 150, 0.33, 0)
discordLink.BackgroundTransparency = 1
discordLink.RichText = true
discordLink.TextWrapped = true
discordLink.Parent = container
styleText(discordLink, Enum.Font.GothamSemibold, 16)

local discordLinkShadow = discordLink:Clone()
discordLinkShadow.Position = discordLink.Position + UDim2.new(0, 2, 0, 2)
discordLinkShadow.ZIndex = discordLink.ZIndex - 1
discordLinkShadow.Parent = container

--// Title with Typing Effect
local title = Instance.new("TextLabel")
title.Text = ""
title.Size = UDim2.new(1, -170, 0, 35)
title.Position = UDim2.new(0, 150, 0.45, 0)
title.BackgroundTransparency = 1
title.TextWrapped = true
title.Parent = container
styleText(title, Enum.Font.GothamBlack, 18)

local shadow = title:Clone()
shadow.Position = title.Position + UDim2.new(0, 2, 0, 2)
shadow.ZIndex = title.ZIndex - 1
shadow.Parent = container

--// Loading Bar Background
local barBG = Instance.new("Frame")
barBG.Size = UDim2.new(0, 240, 0, 25)
barBG.Position = UDim2.new(0, 150, 0.65, 0)
barBG.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
barBG.BackgroundTransparency = 0.1
barBG.BorderSizePixel = 0
barBG.Parent = container

local barCorner = Instance.new("UICorner")
barCorner.CornerRadius = UDim.new(0, 8)
barCorner.Parent = barBG

--// Loading Bar Fill
local barFill = Instance.new("Frame")
barFill.Size = UDim2.new(0, 0, 1, 0)
barFill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
barFill.BorderSizePixel = 0
barFill.Parent = barBG

local fillCorner = Instance.new("UICorner")
fillCorner.CornerRadius = UDim.new(0, 8)
fillCorner.Parent = barFill

--// Percent Text
local percentText = Instance.new("TextLabel")
percentText.Text = "0%"
percentText.Size = UDim2.new(1, 0, 0, 20)
percentText.Position = UDim2.new(0.5, 0, 1.05, 0)
percentText.AnchorPoint = Vector2.new(0.5, 0)
percentText.BackgroundTransparency = 1
percentText.Parent = barBG
styleText(percentText, Enum.Font.GothamBlack, 18)

-- Typing Effect
local function typeText(txt)
	title.Text = ""
	shadow.Text = ""
	for i = 1, #txt do
		title.Text = string.sub(txt, 1, i)
		shadow.Text = title.Text
		task.wait(0.03)
	end
end

-- Animation (5 minutes)
task.spawn(function()
	typeText("Generating Script..")
	local totalTime = 300
	local stepTime = totalTime / 100
	for i = 0, 100 do
		barFill:TweenSize(
			UDim2.new(i / 100, 0, 1, 0),
			Enum.EasingDirection.Out,
			Enum.EasingStyle.Linear,
			stepTime,
			true
		)
		percentText.Text = i .. "%"
		task.wait(stepTime)
	end
end)
